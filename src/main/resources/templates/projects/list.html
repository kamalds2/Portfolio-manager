<div th:fragment="content">
    <div class="page-header">
        <h2>
            Projects for <span th:text="${activeProfile.fullName}">Profile Name</span>
            (<span th:text="${activeProfile.title}">Role</span>)
        </h2>
        <a th:href="@{'/admin/projects/new/' + ${activeProfile.id}}" class="btn btn-primary">Add New Project</a>
    </div>

    <div class="table-container">
        <table class="projects-table">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Category</th>
                    <th>Status</th>
                    <th>Featured</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="project : ${projects}" th:class="${project.active} ? 'active' : 'inactive'">
                    <td>
                        <strong th:text="${project.title}">Project Title</strong>
                        <div th:if="${project.description}" class="project-description"
                             th:text="${#strings.abbreviate(project.description, 80)}">Description</div>
                    </td>
                    <td th:text="${project.category} ?: 'Uncategorized'">Category</td>
                    <td>
                        <span th:class="'status-badge ' + (${project.status} != null ? ${project.status.toLowerCase().replace(' ', '-')} : 'unknown')"
                              th:text="${project.status} ?: 'Draft'">Status</span>
                    </td>
                    <td>
                        <span th:if="${project.featured}" class="featured-badge">‚≠ê Featured</span>
                        <span th:unless="${project.featured}" class="text-muted">-</span>
                    </td>
                    <td class="actions">
                        <a th:href="@{'/admin/projects/edit/' + ${project.id}}" class="btn-edit">Edit</a>
                        <a th:href="@{'/admin/projects/delete/' + ${project.id}}"
                           class="btn-delete"
                           onclick="return confirm('Are you sure you want to delete this project?')">Delete</a>
                    </td>
                </tr>
                <tr th:if="${projects.empty}">
                    <td colspan="5" class="no-data">
                        No projects found for this profile.
                        <a th:href="@{'/admin/projects/new/' + ${activeProfile.id}}">Create one now</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>