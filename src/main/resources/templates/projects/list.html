<div th:fragment="content">
    <div class="page-header">
        <h2>
            Projects for <span th:text="${activeProfile.fullName}">Profile Name</span>
            (<span th:text="${activeProfile.title}">Role</span>)
        </h2>
        <a th:href="@{'/admin/projects/new/' + ${activeProfile.id}}" class="btn btn-primary">Add New Project</a>
    </div>
    <div class="table-container">
        <table class="projects-table datatable">
            <thead>
                <tr>
                    <th>Title</th>
                   
                    <th>Category</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="project : ${projects}" th:class="${project.active} ? 'active' : 'inactive'">
                    <td>
                        <a th:href="@{'/admin/projects/edit/' + ${project.id}}" class="project-link">
                            <strong th:text="${project.title}">Project Title</strong>
                        </a>
                        <div th:if="${project.description}" class="project-description"
                             th:text="${#strings.abbreviate(project.description, 80)}">Description</div>
                    </td>
                   
                    <td th:text="${project.category} ?: 'Uncategorized'">Category</td>
                    <td>
                        <span th:class="'status-badge ' + (${project.status} != null ? ${project.status.toLowerCase().replace(' ', '-')} : 'unknown')"
                              th:text="${project.status} ?: 'Draft'">Status</span>
                    </td>
                    <td class="actions">
                        <a th:href="@{'/admin/projects/view/' + ${project.id}}" class="btn-view" title="View Details">
                            <span class="icon">
                                <svg width="18" height="18" viewBox="0 0 20 20" fill="none"><path d="M10 12a2 2 0 1 0 0-4 2 2 0 0 0 0 4z" fill="#10b981"/><path d="M10 3C5.58 3 2 6.58 2 10s3.58 7 8 7 8-3.58 8-7-3.58-7-8-7zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" fill="#10b981"/></svg>
                            </span>
                        </a>
                        <a th:href="@{'/admin/projects/edit/' + ${project.id}}" class="btn-edit" title="Edit">
                            <span class="icon">
                                <svg width="18" height="18" viewBox="0 0 20 20" fill="none"><path d="M3 14.25V17h2.75l8.09-8.09-2.75-2.75L3 14.25zM17.71 6.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z" fill="#2196f3"/></svg>
                            </span>
                        </a>
                        <a th:href="@{'/admin/projects/delete/' + ${project.id}}"
                           class="btn-delete"
                           onclick="return confirm('Are you sure you want to delete this project?')" title="Delete">
                            <span class="icon">
                                <svg width="17" height="17" viewBox="0 0 20 20" fill="none"><path d="M6 7v7a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V7" stroke="#e74c3c" stroke-width="2"/><path d="M4 7h12" stroke="#e74c3c" stroke-width="2"/><path d="M9 10v3" stroke="#e74c3c" stroke-width="2"/><path d="M11 10v3" stroke="#e74c3c" stroke-width="2"/><rect x="6" y="4" width="8" height="2" rx="1" fill="#e74c3c"/></svg>
                            </span>
                        </a>
                    </td>
                </tr>
                <tr th:if="${projects.empty}">
                    <td colspan="4" class="no-data">
                        No projects found for this profile.
                        <a th:href="@{'/admin/projects/new/' + ${activeProfile.id}}">Create one now</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>