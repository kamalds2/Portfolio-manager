<div th:fragment="content">
    <!-- Admin View -->
    <div th:if="${isAdmin}" class="dashboard admin-view">
        <div class="dashboard-container">
            <header class="page-header">
                <h1>Admin Dashboard</h1>
                <p>Manage portfolios and user accounts</p>
            </header>

            <!-- Statistics Cards -->
            <div class="stats-grid">
                <div class="stats-card">
                    <div class="stats-icon">
                        <i class="fa-solid fa-users"></i>
                    </div>
                    <div class="stats-content">
                        <h3 th:text="${activeProfileCount ?: 0}">0</h3>
                        <p>Total Profiles</p>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stats-icon">
                        <i class="fa-solid fa-user-check"></i>
                    </div>
                    <div class="stats-content">
                        <h3 th:text="${#lists.size(profiles) ?: 0}">0</h3>
                        <p>Active Users</p>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stats-icon">
                        <i class="fa-solid fa-briefcase"></i>
                    </div>
                    <div class="stats-content">
                        <h3>0</h3>
                        <p>Total Projects</p>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stats-icon">
                        <i class="fa-solid fa-star"></i>
                    </div>
                    <div class="stats-content">
                        <h3>0</h3>
                        <p>Total Skills</p>
                    </div>
                </div>
            </div>

            <!-- User Profiles Section -->
            <section class="section">
                <div class="section-header">
                    <h2><i class="fa-solid fa-users"></i> User Profiles</h2>
                    <div class="section-actions">
                        <a th:href="@{/admin/profile/new}" class="btn btn-primary">
                            <i class="fa-solid fa-plus"></i> Add New Profile
                        </a>
                    </div>
                </div>

                <div class="user-card-grid" th:if="${profiles != null and !#lists.isEmpty(profiles)}">
                    <div class="user-card" th:each="profile : ${profiles}">
                        <img class="user-card-avatar"
                             th:src="${profile.profileImage != null} ? ${profile.profileImage} : '/images/default-avatar.png'"
                             alt="Profile Image" />
                        <div class="user-card-details">
                            <h3 th:text="${profile.fullName}">Full Name</h3>
                            <p class="user-title" th:text="${profile.title ?: 'No title specified'}">Title</p>
                            <p class="user-email" th:text="${profile.email}">email@example.com</p>
                            <span class="user-status" 
                                  th:class="${profile.active ? 'badge badge-success' : 'badge badge-secondary'}"
                                  th:text="${profile.active ? 'Active' : 'Inactive'}">Active</span>
                        </div>
                        <div class="user-card-actions">
                            <a th:href="@{'/admin/profile/view/' + ${profile.id}}" class="btn btn-sm btn-secondary" title="View Profile">
                                <i class="fa-solid fa-eye"></i>
                            </a>
                            <a th:href="@{'/admin/profile/edit/' + ${profile.id}}" class="btn btn-sm btn-primary" title="Edit Profile">
                                <i class="fa-solid fa-pencil"></i>
                            </a>
                            <a th:href="@{'/admin/skills/' + ${profile.id}}" class="btn btn-sm btn-info" title="Manage Skills">
                                <i class="fa-solid fa-star"></i>
                            </a>
                            <a th:href="@{'/admin/projects/' + ${profile.id}}" class="btn btn-sm btn-warning" title="Manage Projects">
                                <i class="fa-solid fa-briefcase"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <div class="alert alert-info" th:if="${profiles == null or #lists.isEmpty(profiles)}">
                    <i class="fa-solid fa-info-circle"></i>
                    <strong>No profiles found.</strong> Start by creating your first profile.
                </div>
            </section>
        </div>
    </div>

    <!-- User View -->
    <div th:unless="${isAdmin}" class="dashboard user-view">
        <div class="dashboard-container">
            <!-- No Profile Yet -->
            <div th:if="${noProfile}" class="no-profile">
                <h3>Let's Get Started!</h3>
                <p>You haven't created a profile yet. Create one now to showcase your professional journey!</p>
                <a th:href="@{/admin/profile/new}" class="btn btn-primary">
                    <i class="fa-solid fa-plus"></i> Create Your First Profile
                </a>
            </div>

            <!-- Profile Exists - Centered Card Layout -->
            <div th:unless="${noProfile}">
                <!-- Profile Card (centered) -->
                <div class="profile-card" style="margin: 2rem auto;">
                    <img class="user-card-avatar"
                         th:src="${userProfile.profileImage != null} ? ${userProfile.profileImage} : '/images/default-avatar.png'"
                         alt="Profile" />
                    <div class="user-card-details">
                        <div class="user-card-name" th:text="${userProfile.fullName}">Full Name</div>
                        <div class="user-card-role" th:text="${userProfile.title} ?: 'No title provided'"></div>
                        <div class="user-card-email"><i class="fas fa-envelope"></i> <span th:text="${userProfile.email}">email</span></div>
                        <div class="user-card-email" th:if="${userProfile.phone}"><i class="fas fa-phone"></i> <span th:text="${userProfile.phone}">phone</span></div>
                        <div class="user-card-email" th:if="${userProfile.location}"><i class="fas fa-map-marker-alt"></i> <span th:text="${userProfile.location}">location</span></div>
                    </div>
                </div>

                <!-- Statistics Cards -->
                <div class="stats-grid" style="max-width: 900px; margin: 2rem auto;">
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fa-solid fa-briefcase"></i>
                        </div>
                        <div class="stats-content">
                            <h3 th:text="${#lists.size(projects ?: {})}">0</h3>
                            <p>Active Projects</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fa-solid fa-star"></i>
                        </div>
                        <div class="stats-content">
                            <h3 th:text="${#lists.size(skills ?: {})}">0</h3>
                            <p>Skills</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fa-solid fa-graduation-cap"></i>
                        </div>
                        <div class="stats-content">
                            <h3 th:text="${#lists.size(educationList ?: {})}">0</h3>
                            <p>Education</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fa-solid fa-building"></i>
                        </div>
                        <div class="stats-content">
                            <h3 th:text="${#lists.size(jobs ?: {})}">0</h3>
                            <p>Experience</p>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <section class="section" style="max-width: 900px; margin: 2rem auto;">
                    <div class="section-header">
                        <h2><i class="fa-solid fa-lightning-bolt"></i> Manage Portfolio</h2>
                    </div>
                    <div class="action-buttons">
                        <a th:href="@{'/admin/profile/edit/' + ${userProfile.id}}" class="btn btn-primary">
                            <i class="fa-solid fa-edit"></i> Edit Profile
                        </a>
                        <a th:href="@{'/admin/skills/' + ${userProfile.id}}" class="btn btn-secondary">
                            <i class="fa-solid fa-star"></i> Manage Skills
                        </a>
                        <a th:href="@{'/admin/projects/' + ${userProfile.id}}" class="btn btn-secondary">
                            <i class="fa-solid fa-briefcase"></i> Manage Projects
                        </a>
                        <a th:href="@{'/admin/education/' + ${userProfile.id}}" class="btn btn-secondary">
                            <i class="fa-solid fa-graduation-cap"></i> Manage Education
                        </a>
                        <a th:href="@{'/admin/jobs/' + ${userProfile.id}}" class="btn btn-secondary">
                            <i class="fa-solid fa-building"></i> Manage Experience
                        </a>
                        <a th:href="@{'/admin/about/' + ${userProfile.id}}" class="btn btn-secondary">
                            <i class="fa-solid fa-user"></i> About
                        </a>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>